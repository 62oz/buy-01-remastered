<app-navbar></app-navbar>
<div class="profile-container">
  <ng-container *ngIf="user$ | async as user">
    <div class="profile-page" *ngIf="!formOpen" #profile>
      <img id="profile-picture" [src]="placeholder" alt="profile-picture" />
      <h3>{{ user.name }}</h3>
      <p>{{ user.email }}</p>
      <p>{{ user.role }}</p>
      <button
        pButton
        pRipple
        label="EDIT PROFILE"
        icon="pi pi-user"
        (click)="openForm()"
        class="w-full"
      ></button>
    </div>

    <div class="container flex justify-content-center mt-5" *ngIf="formOpen">
      <div class="surface-card p-4 shadow-2 border-round lg:w-5" #profileForm>
        <div class="text-900 text-3xl font-medium mb-3">Edit information</div>
        <div>
          <form
            [formGroup]="userUpdateForm"
            (input)="onValidate()"
            (ngSubmit)="onSubmit()"
          >
            <label for="update-username" class="block text-900 font-medium mb-2"
              >Username</label
            >
            <input
              id="update-username"
              autocomplete="username"
              type="text"
              [placeholder]="user.name"
              pInputText
              class="w-full mb-3"
              name="name"
              formControlName="name"
            />

            <label for="update-email" class="block text-900 font-medium mb-2"
              >Email</label
            >
            <input
              id="update-email"
              autocomplete="email"
              type="text"
              [placeholder]="user.email"
              pInputText
              class="w-full mb-3"
              formControlName="email"
            />

            <label for="update-password" class="block text-900 font-medium mb-2"
              >Change Password?</label
            >
            <input
              id="update-password"
              autocomplete="current-password"
              type="password"
              placeholder="New password"
              pInputText
              class="w-full mb-3"
              formControlName="password"
            />

            <label
              for="update-confirm-password"
              class="block text-900 font-medium mb-2"
              >Confirm new password</label
            >
            <input
              id="update-confirm-password"
              autocomplete="current-password"
              type="password"
              placeholder="Confirm new password"
              pInputText
              class="w-full mb-3"
              formControlName="confirmPassword"
            />

            <button
              [disabled]="!formValid"
              type="submit"
              pButton
              pRipple
              label="Update"
              icon="pi pi-user"
              class="w-full"
            ></button>
          </form>
        </div>
      </div>
    </div>
  </ng-container>
</div>
